!function e(t,i,n){function o(r,a){if(!i[r]){if(!t[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=i[r]={exports:{}};t[r][0].call(l.exports,function(e){var i=t[r][1][e];return o(i?i:e)},l,l.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var l,h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=e("../../lib/rangeSlider"),c=n(d),p=function(e,t,i,n){if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,i,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,i))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,i,e)||e},n)}},f=function(e){function t(){return s(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),h(t,[{key:"created",value:function(){console.log("created"),this.stopped=!0}},{key:"play",value:function(e){e.play(),this.stopped=!1,this.fire("audioplay")}},{key:"pause",value:function(e){e.pause(),this.fire("audiopause")}},{key:"stop",value:function(e){e.pause(),e.currentTime=0,this.stopped=!0,this.fire("audiostop")}},{key:"toggle",value:function(e){var t=this;e.paused?t.play(e):t.pause(e)}}]),t}(polymer.Base),v=function(e){function t(){s(this,t);for(var e=arguments.length,i=Array(e),n=0;e>n;n++)i[n]=arguments[n];var a=r(this,(l=Object.getPrototypeOf(t)).call.apply(l,[this].concat(o(i))));return a.currentIndex=0,a.formatCurrentTime=0,a.formatDuration=0,a.jsonurl="",a}return a(t,e),h(t,[{key:"ready",value:function(){var e=this;this.initEle(),e.sourcelement=e.$.visAudio.querySelector("source"),e.duration=600,e.changing=!1,e.$.sourceorigin.generateRequest(),console.dir(e.jsonurl)}},{key:"readytoshow",value:function(){var e=this;console.dir(this),console.dir(this.items),e.setsource(e.$.visAudio,e.items[e.currentIndex].location);e.fire("readytoshow")}},{key:"setsource",value:function(e,t){console.log(t),e.src=t}},{key:"prev",value:function(){var e=this;return e.currentIndex>0?(e.currentIndex--,e.setsource(e.$.visAudio,e.items[e.currentIndex].location),!0):!1}},{key:"next",value:function(){var e=this;return e.currentIndex<e.items.length-1?(e.currentIndex++,e.setsource(e.$.visAudio,e.items[e.currentIndex].location),!0):!1}},{key:"initEle",value:function(){var e=this,t=e.$.videorange,i=e.$.videoprogress;e.$.videovolume;c["default"].create(t,{onSlide:function(e,t,i){},onSlideEnd:function(){}}),c["default"].create(i,{startEvent:[]})}},{key:"updatePaperSlider",value:function(e){var t=this;t.$.videoprogress.value=e/t.duration*100,t.$.videoprogress.rangeSlider.update()}},{key:"HanlderLoadStart",value:function(e){console.log("start");var t=this;t.addEventListener("audioplay",function(){t.async(function(){},3e3)})}},{key:"HandlerLoad",value:function(){var e=this;console.log("go"),console.log(e.$.visAudio.src),console.log(e.$.visAudio.duration),console.log("end go"),e.currentTime=e.$.visAudio.currentTime,e.duration=e.$.visAudio.duration,e.formatCurrentTime=e.currentTime,e.formatDuration=e.duration,e.$.visAudio.buffered.length>0&&e.updatePaperSlider(e.$.visAudio.buffered.end(0)),e.$.videorange.rangeSlider.update()}},{key:"HandlerTimeUpdate",value:function(e){var t=this;t.formatCurrentTime=t.$.visAudio.currentTime,t.$.videorange.value=t.$.visAudio.currentTime/t.duration*100,t.changing||t.$.videorange.rangeSlider.update()}},{key:"HanlderProgress",value:function(e){var t=this,i=t.$.visAudio.buffered;t.$.visAudio.currentTime;if(i.length>0){var n=i.end(i.length-1);t.updatePaperSlider(n)}}},{key:"HandleAbort",value:function(e){console.log("abort")}},{key:"HandlePause",value:function(e){console.log("pause")}},{key:"HandlerPlayEnd",value:function(e){var t=this;t.$.videorange.value=0,t.changing||t.$.videorange.rangeSlider.update(),t.fire("audio-player-playend")}},{key:"HandlerTimeChange",value:function(e){var t=this;t.duration&&!Number.isNaN(t.duration)&&(t.changing=!0,t.$.videoMedia.currentTime=e/100*t.duration)}},{key:"toggleHandle",value:function(){var e=this;e.$.toggleAudioButton.toggle(),e.toggle(e.$.visAudio)}},{key:"togglePrev",value:function(){var e=this;e.currentIndex>0?(e.pause(e.$.visAudio),e.prev(),e.play(e.$.visAudio),e.$.toggleAudioButton.toggle()):console.log("已经到第一首了")}},{key:"toggleNext",value:function(){var e=this;e.currentIndex<e.items.length-1?(e.pause(e.$.visAudio),e.next(),e.play(e.$.visAudio),e.$.toggleAudioButton.toggle()):console.log("已经到最后一首了")}},{key:"toggleAtIndex",value:function(e){var t=this;e>0<t.items.length-1?(t.currentIndex=e,t.pause(t.$.visAudio),t.setsource(t.$.visAudio,t.items[t.currentIndex].location),t.play(t.$.visAudio),t.$.toggleAudioButton.toggle()):console.log("已经到最后一首了")}}]),t}(polymer.Base);p([property({type:Object})],v.prototype,"items"),p([property({type:Number})],v.prototype,"currentTime"),p([property({type:Number})],v.prototype,"duration"),p([property({type:Number})],v.prototype,"formatCurrentTime"),p([property({type:Number})],v.prototype,"formatDuration"),p([property({type:String})],v.prototype,"jsonurl"),v=p([component("audio-player"),behavior(f)],v),v.register()},{"../../lib/rangeSlider":2}],2:[function(e,t,i){"use strict";function n(){var e=document.createElement("input");return e.setAttribute("type","range"),"text"!==e.type}function o(e,t){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)}function s(e,t){return t=t||100,function(){if(!e.debouncing){var i=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,i),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.debouncing=!1},t),e.lastReturnVal}}function r(e){return!(0!==e.offsetWidth&&0!==e.offsetHeight&&e.open!==!1)}function a(e){for(var t=[],i=e.parentNode;r(i);)t.push(i),i=i.parentNode;return t}function u(e,t){function i(e){"undefined"!=typeof e.open&&(e.open=e.open?!1:!0)}var n=a(e),o=n.length,s=[],r=e[t];if(o){for(var u=0;o>u;u++)s[u]=n[u].style.display,n[u].style.display="block",n[u].style.height="0",n[u].style.overflow="hidden",n[u].style.visibility="hidden",i(n[u]);r=e[t];for(var l=0;o>l;l++)i(n[l]),n[l].style.display=s[l],n[l].style.height="",n[l].style.overflow="",n[l].style.visibility=""}return r}function l(e){return e===""+e}function h(e){return null!==e&&void 0!==e&&(l(e)&&isFinite(parseFloat(e))||isFinite(e))}function d(){if(!arguments.length)return null;for(var e=0,t=arguments.length;t>e;e++)if(h(arguments[e]))return arguments[e]}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function p(e,t){var i,n={};for(i in e)n[i]=e[i];for(i in t)n[i]=t[i];return n}function f(e,t){for(var i in t)e.style[i]=t[i];return e.style}function v(e,t){b(e,t)||(e.className+=" "+t)}function g(e,t){var i=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(b(e,t)){for(;i.indexOf(" "+t+" ")>=0;)i=i.replace(" "+t+" "," ");e.className=i.replace(/^\s+|\s+$/g,"")}}function m(e,t,i){for(i&&t(e);e.parentNode&&!t(e);)e=e.parentNode;return e}function y(e,t,i){if(!l(t))throw new TypeError("event name must be String");if(!(e instanceof HTMLElement))throw new TypeError("element must be HTMLElement");t=t.trim();var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!1,!1,i),e.dispatchEvent(n)}function b(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")}function E(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function _(e,t,i){t.forEach(function(t){e[A]||(e[A]={}),e[A][t]||(e[A][t]=[]),e.addEventListener(t,i,!1),e[A][t].indexOf(i)<0&&e[A][t].push(i)})}function x(e,t,i){t.forEach(function(t){e.removeEventListener(t,i,!1);var n;e[A]&&e[A][t]&&(n=e[A][t].indexOf(i))>-1&&e[A][t].splice(n,1)})}function S(e){function t(e){e===i._startEventListener&&this.el.removeEventListener(this.eventName,e,!1)}if(e[A]){var i=this;for(var n in e[A])e[A][n].forEach(t,{eventName:n,el:e});e[A]={}}}function w(e,t){var i,n,o;return this.element=e,this.options=p(L,t),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideStart=this.options.onSlideStart,this.onSlideEnd=this.options.onSlideEnd,this.onSlideEventsCount=-1,this.isInteractsNow=!1,this.needTriggerEvents=!1,!this.polyfill&&k?!1:(this.options.buffer=this.options.buffer||parseFloat(this.element.getAttribute("data-buffer")),this.identifier="js-"+T+"-"+F++,this.min=d(this.options.min,parseFloat(this.element.getAttribute("min")),i=0),this.max=d(this.options.max,parseFloat(this.element.getAttribute("max")),n=P),this.value=d(this.options.value,this.element.value,parseFloat(this.element.value||this.min+(this.max-this.min)/2)),this.step=d(this.options.step,parseFloat(this.element.getAttribute("step"))||(o=1)),this.percent=null,this._updatePercentFromValue(),this.toFixed=this._toFixed(this.step),this.fill=document.createElement("div"),this.fill.className=this.options.fillClass,this.handle=document.createElement("div"),this.handle.className=this.options.handleClass,this.range=document.createElement("div"),this.range.className=this.options.rangeClass,this.range.id=this.identifier,this.range.appendChild(this.handle),this.range.appendChild(this.fill),this.options.bufferClass&&(this.buffer=document.createElement("div"),this.buffer.className=this.options.bufferClass,this.range.appendChild(this.buffer)),h(this.options.value)&&(this._setValue(this.options.value,!0),this.element.value=this.options.value),h(this.options.buffer)&&this.element.setAttribute("data-buffer",this.options.buffer),(h(this.options.min)||i)&&this.element.setAttribute("min",""+this.min),(h(this.options.max)||n)&&this.element.setAttribute("max",""+this.max),(h(this.options.step)||o)&&this.element.setAttribute("step",""+this.step),E(this.element,this.range),f(this.element,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this._handleDown=this._handleDown.bind(this),this._handleMove=this._handleMove.bind(this),this._handleEnd=this._handleEnd.bind(this),this._startEventListener=this._startEventListener.bind(this),this._changeEventListener=this._changeEventListener.bind(this),this._handleResize=this._handleResize.bind(this),this._init(),window.addEventListener("resize",this._handleResize,!1),_(document,this.options.startEvent,this._startEventListener),void this.element.addEventListener("change",this._changeEventListener,!1))}Object.defineProperty(i,"__esModule",{value:!0});var A="eventListenerList",N=new RegExp("/[\\n\\t]/","g"),P=100,$=300,C=50,T="rangeSlider",F=0,k=n(),L={polyfill:!0,rangeClass:"rangeSlider",disabledClass:"rangeSlider--disabled",fillClass:"rangeSlider__fill",bufferClass:"rangeSlider__buffer",handleClass:"rangeSlider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"],min:null,max:null,step:null,value:null,buffer:null,borderRadius:10};w.prototype.constructor=w,w.prototype._toFixed=function(e){return(e+"").replace(".","").length-1},w.prototype._init=function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this._update()},w.prototype._updatePercentFromValue=function(){this.percent=(this.value-this.min)/(this.max-this.min)},w.prototype._startEventListener=function(e,t){var i=this,n=e.target,o=!1;m(n,function(e){return o=e.id===i.identifier&&!b(e,i.options.disabledClass)},!0),o&&this._handleDown(e,t)},w.prototype._changeEventListener=function(e,t){if(!t||t.origin!==this.identifier){var i=e.target.value,n=this._getPositionFromValue(i);this._setPosition(n)}},w.prototype._update=function(){this.handleWidth=u(this.handle,"offsetWidth"),this.rangeWidth=u(this.range,"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this._getPositionFromValue(this.value),this.element.disabled?v(this.range,this.options.disabledClass):g(this.range,this.options.disabledClass),this._setPosition(this.position),this.options.bufferClass&&this.options.buffer&&this._setBufferPosition(this.options.buffer),this._updatePercentFromValue();var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.element.dispatchEvent(e)},w.prototype._handleResize=function(){var e=this;return s(function(){o(function(){e._update()},$)},C)()},w.prototype._handleDown=function(e){if(this.isInteractsNow=!0,e.preventDefault(),_(document,this.options.moveEvent,this._handleMove),_(document,this.options.endEvent,this._handleEnd),!((" "+e.target.className+" ").replace(N," ").indexOf(this.options.handleClass)>-1)){var t=this._getRelativePosition(e),i=this.range.getBoundingClientRect().left,n=this._getPositionFromNode(this.handle)-i;this._setPosition(t-this.grabX),t>=n&&t<n+this.handleWidth&&(this.grabX=t-n),this._updatePercentFromValue()}},w.prototype._handleMove=function(e){this.isInteractsNow=!0,e.preventDefault();var t=this._getRelativePosition(e);this._setPosition(t-this.grabX)},w.prototype._handleEnd=function(e){e.preventDefault(),x(document,this.options.moveEvent,this._handleMove),x(document,this.options.endEvent,this._handleEnd),y(this.element,"change",{origin:this.identifier}),(this.isInteractsNow||this.needTriggerEvents)&&this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.value,this.percent,this.position),this.onSlideEventsCount=0,this.isInteractsNow=!1},w.prototype._cap=function(e,t,i){return t>e?t:e>i?i:e},w.prototype._setPosition=function(e){var t,i;t=this._getValueFromPosition(this._cap(e,0,this.maxHandleX)),i=this._getPositionFromValue(t),this.fill.style.width=i+this.grabX+"px",this.handle.style.left=i+"px",this._setValue(t),this.position=i,this.value=t,this._updatePercentFromValue(),(this.isInteractsNow||this.needTriggerEventss)&&(this.onSlideStart&&"function"==typeof this.onSlideStart&&0===this.onSlideEventsCount&&this.onSlideStart(this.value,this.percent,this.position),this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(this.value,this.percent,this.position)),this.onSlideEventsCount++},w.prototype._setBufferPosition=function(e){var t,i,n,o=!0;if(isFinite(e))e=parseFloat(e);else{if(!l(e))return void console.warn("New position must be XXpx or XX%");e.indexOf("px")>0&&(o=!1),e=parseFloat(e)}return isNaN(e)?void console.warn("New position is NaN"):this.options.bufferClass?(t=o?e:e/this.rangeWidth*100,0>t&&(t=0),t>100&&(t=100),this.options.buffer=t,i=this.options.borderRadius/this.rangeWidth*100,n=t-i,0>n&&(n=0),this.buffer.style.width=n+"%",this.buffer.style.left=.5*i+"%",void this.element.setAttribute("data-buffer",t)):void console.warn("You disabled buffer, it's className is empty")},w.prototype._getPositionFromNode=function(e){for(var t=0;null!==e;)t+=e.offsetLeft,e=e.offsetParent;return t},w.prototype._getRelativePosition=function(e){var t=this.range.getBoundingClientRect().left,i=0;return"undefined"!=typeof e.pageX?i=e.touches&&e.touches.length?e.touches[0].pageX:e.pageX:"undefined"!=typeof e.originalEvent?"undefined"!=typeof e.originalEvent.clientX?i=e.originalEvent.clientX:e.originalEvent.touches&&e.originalEvent.touches[0]&&"undefined"!=typeof e.originalEvent.touches[0].clientX&&(i=e.originalEvent.touches[0].clientX):e.touches&&e.touches[0]&&"undefined"!=typeof e.touches[0].clientX?i=e.touches[0].clientX:e.currentPoint&&"undefined"!=typeof e.currentPoint.x&&(i=e.currentPoint.x),i-t},w.prototype._getPositionFromValue=function(e){var t,i;return t=(e-this.min)/(this.max-this.min),i=t*this.maxHandleX},w.prototype._getValueFromPosition=function(e){var t,i;return t=e/(this.maxHandleX||1),i=this.step*Math.round(t*(this.max-this.min)/this.step)+this.min,Number(i.toFixed(this.toFixed))},w.prototype._setValue=function(e,t){(e!==this.value||t)&&(this.element.value=e,this.value=e,y(this.element,"input",{origin:this.identifier}))},w.prototype.update=function(e,t){return t&&(this.needTriggerEvents=!0),c(e)&&(h(e.min)&&(this.element.setAttribute("min",""+e.min),this.min=e.min),h(e.max)&&(this.element.setAttribute("max",""+e.max),this.max=e.max),h(e.step)&&(this.element.setAttribute("step",""+e.step),this.step=e.step,this.toFixed=this._toFixed(e.step)),h(e.buffer)&&this._setBufferPosition(e.buffer),h(e.value)&&this._setValue(e.value)),this._update(),this.onSlideEventsCount=0,this.needTriggerEvents=!1,this},w.prototype.destroy=function(){S.call(this,document),window.removeEventListener("resize",this._handleResize,!1),this.element.removeEventListener("change",this._changeEventListener,!1),this.element.style.cssText="",delete this.element[T],this.range&&this.range.parentNode.removeChild(this.range)},w.create=function(e,t){function i(e){var i=e[T];i||(i=new w(e,t),e[T]=i)}e.length?Array.prototype.slice.call(e).forEach(function(e){i(e)}):i(e)},i["default"]=w},{}]},{},[1]);