!function e(t,n,o){function r(a,l){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=Object.getPrototypeOf(e);t instanceof s?(f.unshift(t),r(t)):(f.unshift(t),f.forEach(function(e){var t=Object.getOwnPropertyNames(e);t.forEach(function(t){"constructor"!==t&&(d[t]=e[t])})}))}function i(e,t){r(e);var n=Object.getOwnPropertyNames(d);n.forEach(function(e){"constructor"!==e&&(t[e]=d[e])});for(var o in e)t[o]=e[o];return window.addEventListener("dom-change",function(){t.domChange()}),t}function a(e){console.log("View-Controller"+e.selector),window.addEventListener("WebComponentsReady",function(){var t=document.querySelector("View-Controller"+e.selector),n=new e(t);i(n,t),n.sharedApplication=w,n.initialize(),p.forEach(function(e,t){w[t]=e.bind(n)})})}function l(e,t,n){p.set(t,e[t])}function c(e){w=e}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(t){o(this,e),this.element=t}return u(e,[{key:"initialize",value:function(){}},{key:"domChange",value:function(){}}]),e}(),f=[],d={},p=new Map,w=null;n.UIViewController=s,n.delegate=a,n.bindApplication=l,n.application=c},{}],2:[function(require,module,exports){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _typeof(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function addMessage(e,t){console.dir(t),e.setAttribute("items",JSON.stringify(t))}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_UIViewController2=require("../../../framework/controller/UIViewController"),__decorate=function(e,t,n,o){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,o);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,o){return void(o&&o(t,n))},void 0);case 4:return e.reduceRight(function(e,o){return o&&o(t,n,e)||e},o)}},app=document.querySelector("#app");app.addEventListener("dom-change",function(){});var IndexViewController=function(_UIViewController){function IndexViewController(e){return _classCallCheck(this,IndexViewController),_possibleConstructorReturn(this,Object.getPrototypeOf(IndexViewController).call(this,e))}return _inherits(IndexViewController,_UIViewController),_createClass(IndexViewController,[{key:"initialize",value:function initialize(){var messageDom=this.element.querySelector("#message"),usernameDom=this.sharedApplication.$.username,roomIdDom=this.element.querySelector("#roomid"),safehtmlDom=this.element.querySelector("#safehtml"),receiveData=[],ws=new WebSocket("ws://0.0.0.0:7272");this.ws=ws,ws.onopen=function(){var e='{"type":"login","client_name":"'+usernameDom.value+'","room_id":"'+roomIdDom.value+'"}';console.log("websocket握手成功，发送登录数据:"+e),ws.send(e)},ws.onmessage=function(e){var data=eval("("+e.data+")");"say"==data.type&&(safehtmlDom.innerHTML=data.content,data.content=safehtmlDom.value,console.log(safehtmlDom.value),console.dir(data),receiveData.push(data),addMessage(messageDom,receiveData))}}},{key:"handleMessageSend",value:function(e){var t=this;if(e.ctrlKey&&13==e.which){var n={type:"say",to_client_id:"all",to_client_name:null,content:e.target.value};t.ws.send(JSON.stringify(n)),e.target.value=""}}}]),IndexViewController}(_UIViewController2.UIViewController);IndexViewController.selector="#index",Object.defineProperty(IndexViewController.prototype,"handleMessageSend",__decorate([_UIViewController2.bindApplication],IndexViewController.prototype,"handleMessageSend",Object.getOwnPropertyDescriptor(IndexViewController.prototype,"handleMessageSend"))),IndexViewController=__decorate([(0,_UIViewController2.application)(document.querySelector("#app")),_UIViewController2.delegate],IndexViewController)},{"../../../framework/controller/UIViewController":1}]},{},[2]);