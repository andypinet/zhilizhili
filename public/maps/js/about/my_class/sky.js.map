{"version":3,"names":[],"mappings":"","sources":["about/my_class/sky.js"],"sourcesContent":["export default function(superClass) {\n\t\textend(sky, superClass);\n\n\t\tfunction sky() {\n\t\t\tthis.setSky = bind(this.setSky, this);\n\t\t\tthis.dispose = bind(this.dispose, this);\n\t\t\tthis.update = bind(this.update, this);\n\t\t\tthis.start = bind(this.start, this);\n\t\t\tsky.__super__.constructor.call(this);\n\t\t\tthis._scale = this._conf.SKY_SCALE[this._device];\n\t\t\tthis._soraList = [];\n\t\t\tthis._nextStageId = 0;\n\t\t\tthis._prevStageId = 0;\n\t\t}\n\n\t\tsky.prototype.start = function() {\n\t\t\tvar i, num, sora;\n\t\t\tsky.__super__.start.call(this);\n\t\t\ti = 0;\n\t\t\tnum = 1;\n\t\t\twhile (i < num) {\n\t\t\t\tsora = this._data.getCmnObj3D(\"sky\" + String(i)).clone();\n\t\t\t\tsora.children[0].material.side = THREE.BackSide;\n\t\t\t\tthis._container.add(sora);\n\t\t\t\tthis._soraList.push(sora);\n\t\t\t\tsora.position.y = -400;\n\t\t\t\tsora.visible = true;\n\t\t\t\ti++;\n\t\t\t}\n\t\t\treturn this._container.scale.set(this._scale, this._scale, this._scale);\n\t\t};\n\n\t\tsky.prototype.update = function() {\n\t\t\tsky.__super__.update.call(this);\n\t\t\tif (this._container.visible) {\n\t\t\t\tthis._container.position.z = this._camera.position.z;\n\t\t\t\treturn this._container.rotation.z = this._camera.rotation.z;\n\t\t\t}\n\t\t};\n\n\t\tsky.prototype.dispose = function() {\n\t\t\tvar i, j, len1, ref, val;\n\t\t\tif (this._soraList != null) {\n\t\t\t\tref = this._soraList;\n\t\t\t\tfor (i = j = 0, len1 = ref.length; j < len1; i = ++j) {\n\t\t\t\t\tval = ref[i];\n\t\t\t\t\tthis._container.remove(val);\n\t\t\t\t}\n\t\t\t\tthis._soraList = null;\n\t\t\t}\n\t\t\treturn sky.__super__.dispose.call(this);\n\t\t};\n\n\t\tsky.prototype.setSky = function(stageId, animate) {\n\t\t\tvar i, j, len1, ref, results, val;\n\t\t\treturn;\n\t\t\tthis._prevStageId = this._nextStageId;\n\t\t\tthis._nextStageId = stageId;\n\t\t\tref = this._soraList;\n\t\t\tresults = [];\n\t\t\tfor (i = j = 0, len1 = ref.length; j < len1; i = ++j) {\n\t\t\t\tval = ref[i];\n\t\t\t\tif (animate) {\n\t\t\t\t\tval.visible = i === this._nextStageId || i === this._prevStageId;\n\t\t\t\t\tif (i === this._nextStageId) {\n\t\t\t\t\t\tresults.push(val.children[0].material.opacity = 0);\n\t\t\t\t\t} else if (i === this._prevStageId) {\n\t\t\t\t\t\tresults.push(val.children[0].material.opacity = 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresults.push(void 0);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresults.push(val.visible = i === this._nextStageId);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t\treturn sky;\n\n\t}"],"file":"about/my_class/sky.js","sourceRoot":"/source/"}