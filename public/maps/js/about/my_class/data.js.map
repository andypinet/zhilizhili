{"version":3,"names":[],"mappings":"","sources":["about/my_class/data.js"],"sourcesContent":["export default function() {\n\t\tfunction data() {\n\t\t\tthis._eCompleteStgBgm = bind(this._eCompleteStgBgm, this);\n\t\t\tthis._eCompleteStageObj = bind(this._eCompleteStageObj, this);\n\t\t\tthis._eProgressStageObj = bind(this._eProgressStageObj, this);\n\t\t\tthis._getObjList = bind(this._getObjList, this);\n\t\t\tthis.loadNextStage = bind(this.loadNextStage, this);\n\t\t\tthis._eCompleteMultiObjData = bind(this._eCompleteMultiObjData, this);\n\t\t\tthis.getStageObj3D = bind(this.getStageObj3D, this);\n\t\t\tthis.getCmnObj3D = bind(this.getCmnObj3D, this);\n\t\t\tthis._eCompleteCmnObjData = bind(this._eCompleteCmnObjData, this);\n\t\t\tthis._eProgressCmnObjData = bind(this._eProgressCmnObjData, this);\n\t\t\tthis._makeStgpartsTex = bind(this._makeStgpartsTex, this);\n\t\t\tthis._makeEtcStageTex = bind(this._makeEtcStageTex, this);\n\t\t\tthis._makeStageTex = bind(this._makeStageTex, this);\n\t\t\tthis.start = bind(this.start, this);\n\t\t\tthis._skyTex;\n\t\t\tthis._itemTex;\n\t\t\tthis._stageTex = [];\n\t\t\tthis._etcStageTex = [];\n\t\t\tthis._stgpartsTex = [];\n\t\t\tthis._cmnObjMgr;\n\t\t\tthis._stageObjMgr = [];\n\t\t\tthis._clouds = [];\n\t\t\tthis._conf = root.MY.app.conf;\n\t\t\tthis.onProgress;\n\t\t\tthis.onComplete;\n\t\t\tthis.onProgressNextData;\n\t\t\tthis.onCompleteNextData;\n\t\t\tthis._delayCall;\n\t\t}\n\n\t\tdata.prototype.start = function() {\n\t\t\tthis._delayCall = new root.MY_CLASS.delayCall();\n\t\t\tthis._delayCall.start();\n\t\t\tthis._itemTex = THREE.ImageUtils.loadTexture(root.MY.app.conf.FILE_ITEM_TEX);\n\t\t\tthis._makeStageTex();\n\t\t\tthis._makeEtcStageTex();\n\t\t\tthis._makeStgpartsTex();\n\t\t\tthis._cmnObjMgr = new root.MY_CLASS.multiObjLoader();\n\t\t\tthis._cmnObjMgr.onProgress = this._eProgressCmnObjData;\n\t\t\tthis._cmnObjMgr.onComplete = this._eCompleteCmnObjData;\n\t\t\treturn this._cmnObjMgr.load([\n\t\t\t\t{\n\t\t\t\t\tkey: \"stageLoading0\",\n\t\t\t\t\tfile: this._conf.FILE_STAGE_LOADING_OBJ[6],\n\t\t\t\t\ttex: this._stageTex[6],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"stageLoading1\",\n\t\t\t\t\tfile: this._conf.FILE_STAGE_LOADING_OBJ[1],\n\t\t\t\t\ttex: this._stageTex[1],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"stageLoading2\",\n\t\t\t\t\tfile: this._conf.FILE_STAGE_LOADING_OBJ[2],\n\t\t\t\t\ttex: this._stageTex[2],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"stageLoading3\",\n\t\t\t\t\tfile: this._conf.FILE_STAGE_LOADING_OBJ[2],\n\t\t\t\t\ttex: this._stageTex[2],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"stageLoading4\",\n\t\t\t\t\tfile: this._conf.FILE_STAGE_LOADING_OBJ[4],\n\t\t\t\t\ttex: this._stageTex[4],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"stageLoading5\",\n\t\t\t\t\tfile: this._conf.FILE_STAGE_LOADING_OBJ[5],\n\t\t\t\t\ttex: this._stageTex[5],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"stageLoading6\",\n\t\t\t\t\tfile: this._conf.FILE_STAGE_LOADING_OBJ[6],\n\t\t\t\t\ttex: this._stageTex[6],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"seaDown\",\n\t\t\t\t\tfile: this._conf.FILE_SEADOWN_OBJ[0],\n\t\t\t\t\ttex: this._stageTex[5],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"item0\",\n\t\t\t\t\tfile: this._conf.FILE_ITEM_OBJ[0],\n\t\t\t\t\ttex: this._itemTex,\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"item1\",\n\t\t\t\t\tfile: this._conf.FILE_ITEM_OBJ[1],\n\t\t\t\t\ttex: this._itemTex,\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"item2\",\n\t\t\t\t\tfile: this._conf.FILE_ITEM_OBJ[2],\n\t\t\t\t\ttex: this._itemTex,\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"sky0\",\n\t\t\t\t\tfile: this._conf.FILE_SKY_OBJ,\n\t\t\t\t\ttex: THREE.ImageUtils.loadTexture(root.MY.app.conf.FILE_SKY_TEX[0]),\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"cloud0\",\n\t\t\t\t\tfile: this._conf.FILE_CLOUD_OBJ[5],\n\t\t\t\t\ttex: this._stageTex[1],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"cloud1\",\n\t\t\t\t\tfile: this._conf.FILE_CLOUD_OBJ[1],\n\t\t\t\t\ttex: this._stageTex[1],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"cloud2\",\n\t\t\t\t\tfile: this._conf.FILE_CLOUD_OBJ[2],\n\t\t\t\t\ttex: this._stageTex[2],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"cloud3\",\n\t\t\t\t\tfile: this._conf.FILE_CLOUD_OBJ[3],\n\t\t\t\t\ttex: this._stageTex[3],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"cloud4\",\n\t\t\t\t\tfile: this._conf.FILE_CLOUD_OBJ[4],\n\t\t\t\t\ttex: this._stageTex[4],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"cloud5\",\n\t\t\t\t\tfile: this._conf.FILE_CLOUD_OBJ[1],\n\t\t\t\t\ttex: this._stageTex[1],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"cloud6\",\n\t\t\t\t\tfile: this._conf.FILE_CLOUD_OBJ[1],\n\t\t\t\t\ttex: this._stageTex[1],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"fusha\",\n\t\t\t\t\tfile: this._conf.FILE_FUSYA_OBJ[0],\n\t\t\t\t\ttex: this._stageTex[0],\n\t\t\t\t\trePos: false\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"sea\",\n\t\t\t\t\tfile: this._conf.FILE_SEA_OBJ[0],\n\t\t\t\t\ttex: this._stageTex[5],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"kujira\",\n\t\t\t\t\tfile: this._conf.FILE_KUJIRA_OBJ[0],\n\t\t\t\t\ttex: this._stageTex[5],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"doorLeft\",\n\t\t\t\t\tfile: this._conf.FILE_CASTLE_OBJ[1],\n\t\t\t\t\ttex: this._stageTex[6],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"doorRight\",\n\t\t\t\t\tfile: this._conf.FILE_CASTLE_OBJ[2],\n\t\t\t\t\ttex: this._stageTex[6],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"stg4Etc\",\n\t\t\t\t\tfile: this._conf.FILE_BOAT_OBJ[1],\n\t\t\t\t\ttex: this._stageTex[4],\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"prestage4\",\n\t\t\t\t\tfile: this._conf.FILE_STAGE_OBJ[4],\n\t\t\t\t\ttex: this._stageTex[4],\n\t\t\t\t\trePos: true\n\t\t\t\t}\n\t\t\t]);\n\t\t};\n\n\t\tdata.prototype._makeStageTex = function() {\n\t\t\tvar i, j, len1, ref, results, tex, val;\n\t\t\tref = this._conf.FILE_STAGE_TEX;\n\t\t\tresults = [];\n\t\t\tfor (i = j = 0, len1 = ref.length; j < len1; i = ++j) {\n\t\t\t\tval = ref[i];\n\t\t\t\ttex = THREE.ImageUtils.loadTexture(val);\n\t\t\t\tresults.push(this._stageTex[i] = tex);\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t\tdata.prototype._makeEtcStageTex = function() {};\n\n\t\tdata.prototype._makeStgpartsTex = function() {};\n\n\t\tdata.prototype._eProgressCmnObjData = function(rate) {\n\t\t\tif (this.onProgress != null) {\n\t\t\t\treturn this.onProgress(rate);\n\t\t\t}\n\t\t};\n\n\t\tdata.prototype._eCompleteCmnObjData = function() {\n\t\t\tif (this.onComplete != null) {\n\t\t\t\treturn this.onComplete();\n\t\t\t}\n\t\t};\n\n\t\tdata.prototype.getCmnObj3D = function(key) {\n\t\t\treturn this._cmnObjMgr.get(key).obj;\n\t\t};\n\n\t\tdata.prototype.getStageObj3D = function(stageId, key) {\n\t\t\treturn this._stageObjMgr[stageId].get(key).obj;\n\t\t};\n\n\t\tdata.prototype._eCompleteMultiObjData = function() {\n\t\t\tif (this.onComplete != null) {\n\t\t\t\treturn this.onComplete();\n\t\t\t}\n\t\t};\n\n\t\tdata.prototype.loadNextStage = function(stageId, gameId, isDelay) {\n\t\t\tvar d, interval;\n\t\t\tinterval = stageId === 0 ? this._conf.STG_INTERVAL * 3 : this._conf.STG_INTERVAL;\n\t\t\tif (this._stageObjMgr[stageId] != null) {\n\t\t\t\tthis._delayCall.onComplete = (function(_this) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\treturn _this._eCompleteStageObj();\n\t\t\t\t\t};\n\t\t\t\t})(this);\n\t\t\t\treturn this._delayCall.watchStart(interval);\n\t\t\t} else {\n\t\t\t\td = isDelay ? interval : 1;\n\t\t\t\tthis._delayCall.onComplete = (function(_this) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tvar loader;\n\t\t\t\t\t\tloader = new root.MY_CLASS.multiObjLoader();\n\t\t\t\t\t\t_this._stageObjMgr[stageId] = loader;\n\t\t\t\t\t\tloader.onProgress = _this._eProgressStageObj;\n\t\t\t\t\t\tloader.onComplete = _this._eCompleteStageObj;\n\t\t\t\t\t\treturn loader.load(_this._getObjList(stageId, gameId));\n\t\t\t\t\t};\n\t\t\t\t})(this);\n\t\t\t\treturn this._delayCall.watchStart(d);\n\t\t\t}\n\t\t};\n\n\t\tdata.prototype._getObjList = function(stageId, gameId) {\n\t\t\tvar arr;\n\t\t\tarr = [\n\t\t\t\t{\n\t\t\t\t\tkey: \"stage\",\n\t\t\t\t\tfile: this._conf.FILE_STAGE_OBJ[stageId],\n\t\t\t\t\ttex: this._stageTex[stageId],\n\t\t\t\t\trePos: true\n\t\t\t\t}\n\t\t\t];\n\t\t\treturn arr;\n\t\t};\n\n\t\tdata.prototype._eProgressStageObj = function(rate) {\n\t\t\tif (this.onProgressNextData != null) {\n\t\t\t\treturn this.onProgressNextData(rate);\n\t\t\t}\n\t\t};\n\n\t\tdata.prototype._eCompleteStageObj = function() {\n\t\t\tif (root.MY.gl.audio != null) {\n\t\t\t\troot.MY.gl.audio.onCompleteStageBgm = this._eCompleteStgBgm;\n\t\t\t\treturn root.MY.gl.audio.loadStgBgm(root.MY.gl.game.nextStageId());\n\t\t\t} else {\n\t\t\t\treturn this._eCompleteStgBgm();\n\t\t\t}\n\t\t};\n\n\t\tdata.prototype._eCompleteStgBgm = function() {\n\t\t\tif (this.onCompleteNextData != null) {\n\t\t\t\treturn this.onCompleteNextData();\n\t\t\t}\n\t\t};\n\n\t\treturn data;\n\n\t}"],"file":"about/my_class/data.js","sourceRoot":"/source/"}