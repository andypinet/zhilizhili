{"version":3,"names":[],"mappings":"","sources":["about/my_class/ring.js"],"sourcesContent":["export default function(superClass) {\n\t\textend(ring, superClass);\n\n\t\tfunction ring(id) {\n\t\t\tthis.lifeUp = bind(this.lifeUp, this);\n\t\t\tthis.hide = bind(this.hide, this);\n\t\t\tthis.show = bind(this.show, this);\n\t\t\tthis.dispose = bind(this.dispose, this);\n\t\t\tthis.update = bind(this.update, this);\n\t\t\tthis.start = bind(this.start, this);\n\t\t\tring.__super__.constructor.call(this);\n\t\t\tthis._id = id;\n\t\t\tthis._color;\n\t\t\tthis._colorParam = {};\n\t\t\tthis._ang = this._id * (360 / this._conf.PRE_SET_RING_NUM);\n\t\t\tthis._tgOpacity = 1;\n\t\t\tthis._anm = new root._LIBS.animation();\n\t\t\tthis._mesh;\n\t\t}\n\n\t\tring.prototype.start = function() {\n\t\t\tvar geometry, material;\n\t\t\tring.__super__.start.call(this);\n\t\t\tthis._color = new THREE.Color();\n\t\t\tthis._colorParam.s = this._colorParam.defS = this._colorParam.ts = 0.65;\n\t\t\tthis._colorParam.l = this._colorParam.defL = this._colorParam.tl = 0.6;\n\t\t\tgeometry = new THREE.TorusGeometry(60, 2, 32, 32);\n\t\t\tmaterial = new THREE.MeshBasicMaterial({\n\t\t\t\tcolor: 0xffffff,\n\t\t\t\ttransparent: true,\n\t\t\t\topacity: 0,\n\t\t\t\tblending: THREE.AdditiveBlending,\n\t\t\t\tdepthTest: true\n\t\t\t});\n\t\t\tthis._mesh = new THREE.Mesh(geometry, material);\n\t\t\tthis._container.add(this._mesh);\n\t\t\tthis._container.visible = false;\n\t\t\treturn this.update();\n\t\t};\n\n\t\tring.prototype.update = function() {\n\t\t\tvar ease0, ease1, mat, opacity, scale;\n\t\t\tring.__super__.update.call(this);\n\t\t\tif (this._container.visible) {\n\t\t\t\tthis._container.rotation.x = this._camera.rotation.x;\n\t\t\t\tthis._container.rotation.y = this._camera.rotation.y;\n\t\t\t\tease0 = 0.1;\n\t\t\t\tease1 = 0.3;\n\t\t\t\tthis._colorParam.ts += (this._colorParam.defS - this._colorParam.ts) * ease0;\n\t\t\t\tthis._colorParam.tl += (this._colorParam.defL - this._colorParam.tl) * ease0;\n\t\t\t\tthis._colorParam.s += (this._colorParam.ts - this._colorParam.s) * ease1;\n\t\t\t\tthis._colorParam.l += (this._colorParam.tl - this._colorParam.l) * ease1;\n\t\t\t\tthis._ang += 2;\n\t\t\t\tthis._color.setHSL(this._u.map(Math.sin(this._u.radian(this._ang)), 0, 1, -1, 1), this._colorParam.s, this._colorParam.l);\n\t\t\t\topacity = this._u.map(this._camera.position.z - this._container.position.z, 1, 0, 200, 3000);\n\t\t\t\topacity *= this._anm.get(\"opacity\");\n\t\t\t\tmat = this._mesh.material;\n\t\t\t\tmat.setValues({\n\t\t\t\t\tcolor: this._color.getHex(),\n\t\t\t\t\topacity: opacity\n\t\t\t\t});\n\t\t\t\tmat.needsUpdate = true;\n\t\t\t\tif (!this._anm.isCompleted()) {\n\t\t\t\t\tscale = this._anm.get(\"scale\");\n\t\t\t\t\treturn this._mesh.scale.set(scale, scale, scale);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tring.prototype.dispose = function() {\n\t\t\tif (this._mesh != null) {\n\t\t\t\tthis._container.remove(this._mesh);\n\t\t\t\tthis._mesh.geometry.dispose();\n\t\t\t\tthis._mesh.material.dispose();\n\t\t\t\tthis._mesh = null;\n\t\t\t}\n\t\t\tthis._color = null;\n\t\t\treturn ring.__super__.dispose.call(this);\n\t\t};\n\n\t\tring.prototype.show = function(pos) {\n\t\t\tthis._container.visible = true;\n\t\t\tthis._container.position.copy(pos);\n\t\t\tthis._anm.set({\n\t\t\t\topacity: {\n\t\t\t\t\tfrom: 0,\n\t\t\t\t\tto: this._tgOpacity\n\t\t\t\t},\n\t\t\t\tscale: {\n\t\t\t\t\tfrom: 5,\n\t\t\t\t\tto: 1\n\t\t\t\t},\n\t\t\t\tframe: 50,\n\t\t\t\tdelay: this._id * 10,\n\t\t\t\tease: \"easeInOutExpo\"\n\t\t\t});\n\t\t\tthis._anm.start();\n\t\t\treturn this.update();\n\t\t};\n\n\t\tring.prototype.hide = function() {\n\t\t\tthis._container.visible = false;\n\t\t\tthis._mesh.material.opacity = 0;\n\t\t\treturn this._anm.reset();\n\t\t};\n\n\t\tring.prototype.lifeUp = function() {\n\t\t\tthis._colorParam.ts = 1;\n\t\t\treturn this._colorParam.tl = 1;\n\t\t};\n\n\t\treturn ring;\n\n\t}"],"file":"about/my_class/ring.js","sourceRoot":"/source/"}