{"version":3,"names":[],"mappings":"","sources":["about/my_class/life_triangle.js"],"sourcesContent":["export default function(superClass) {\n\t\textend(lifeTriangle, superClass);\n\n\t\tfunction lifeTriangle(option) {\n\t\t\tthis.reset = bind(this.reset, this);\n\t\t\tthis.lifeUp = bind(this.lifeUp, this);\n\t\t\tthis.hide = bind(this.hide, this);\n\t\t\tthis.show = bind(this.show, this);\n\t\t\tthis.draw = bind(this.draw, this);\n\t\t\tthis.updateColor2 = bind(this.updateColor2, this);\n\t\t\tthis.updateColor = bind(this.updateColor, this);\n\t\t\tthis.dispose2 = bind(this.dispose2, this);\n\t\t\tthis.update = bind(this.update, this);\n\t\t\tthis.addStage = bind(this.addStage, this);\n\t\t\tlifeTriangle.__super__.constructor.call(this, {\n\t\t\t\tupdate: true\n\t\t\t});\n\t\t\tthis._option = option;\n\t\t\tthis._tri;\n\t\t\tthis._color;\n\t\t\tthis.centerX = 0;\n\t\t\tthis._isShow = true;\n\t\t\tthis._isColorAnimation = this._u.isChrome() && !this._isSmt;\n\t\t}\n\n\t\tlifeTriangle.prototype.addStage = function() {\n\t\t\tthis._option.ts = this._option.defS = this._option.s;\n\t\t\tthis._option.tl = this._option.defL = this._option.l;\n\t\t\tthis._color = new THREE.Color();\n\t\t\tthis._color.setHSL(this._option.h, this._option.s, this._option.l);\n\t\t\tthis._tri = new root._LIBS.display();\n\t\t\tthis.addChild(this._tri);\n\t\t\tif (this._option.isTop) {\n\t\t\t\tthis._tri.elm().css({\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\tborderTop: this._option.height + \"px solid #\" + this._color.getHexString(),\n\t\t\t\t\tborderRight: (this._option.width * 0.5) + \"px solid transparent\",\n\t\t\t\t\tborderBottom: \"0px solid transparent\",\n\t\t\t\t\tborderLeft: (this._option.width * 0.5) + \"px solid transparent\"\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis._tri.elm().css({\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\tborderBottom: this._option.height + \"px solid #\" + this._color.getHexString(),\n\t\t\t\t\tborderRight: (this._option.width * 0.5) + \"px solid transparent\",\n\t\t\t\t\tborderTop: \"0px solid transparent\",\n\t\t\t\t\tborderLeft: (this._option.width * 0.5) + \"px solid transparent\"\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.update();\n\t\t};\n\n\t\tlifeTriangle.prototype.update = function() {\n\t\t\tif (this.visible() && this._isColorAnimation) {\n\t\t\t\tthis.updateColor();\n\t\t\t\treturn this.draw();\n\t\t\t}\n\t\t};\n\n\t\tlifeTriangle.prototype.dispose2 = function() {};\n\n\t\tlifeTriangle.prototype.updateColor = function() {\n\t\t\tvar cEase0, cEase1, h, life;\n\t\t\tif ((root.MY.gl.game != null) && this.visible()) {\n\t\t\t\tlife = root.MY.gl.game.life();\n\t\t\t\th = this._u.map(life, 0, 117, 0.2, 1) / 360;\n\t\t\t\tcEase0 = 0.1;\n\t\t\t\tcEase1 = 0.5;\n\t\t\t\tthis._option.ts += (this._option.defS - this._option.ts) * cEase0;\n\t\t\t\tthis._option.s += (this._option.ts - this._option.s) * cEase1;\n\t\t\t\tthis._option.tl += (this._option.defL - this._option.tl) * cEase0;\n\t\t\t\tthis._option.l += (this._option.tl - this._option.l) * cEase1;\n\t\t\t\treturn this._color.setHSL(h, this._option.s, this._option.l);\n\t\t\t}\n\t\t};\n\n\t\tlifeTriangle.prototype.updateColor2 = function(h) {\n\t\t\tif (root.MY.gl.game != null) {\n\t\t\t\treturn this._color.setHSL(h / 360, this._option.s, this._option.l);\n\t\t\t}\n\t\t};\n\n\t\tlifeTriangle.prototype.draw = function() {\n\t\t\tif (this.visible()) {\n\t\t\t\tif (this._option.isTop) {\n\t\t\t\t\treturn this._tri.elm().css({\n\t\t\t\t\t\tborderTop: this._option.height + \"px solid #\" + this._color.getHexString()\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn this._tri.elm().css({\n\t\t\t\t\t\tborderBottom: this._option.height + \"px solid #\" + this._color.getHexString()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlifeTriangle.prototype.show = function(isAnimate) {\n\t\t\treturn this.visible(true);\n\t\t};\n\n\t\tlifeTriangle.prototype.hide = function(isAnimate) {\n\t\t\treturn this.visible(false);\n\t\t};\n\n\t\tlifeTriangle.prototype.lifeUp = function() {\n\t\t\tif (this._isColorAnimation) {\n\t\t\t\tthis._option.ts = 1;\n\t\t\t\treturn this._option.tl = 1;\n\t\t\t}\n\t\t};\n\n\t\tlifeTriangle.prototype.reset = function() {\n\t\t\tthis._option.s = this._option.ts = this._option.defS;\n\t\t\tthis._option.l = this._option.tl = this._option.defL;\n\t\t\tthis._color.setHSL(this._option.h, this._option.s, this._option.l);\n\t\t\tthis.visible(true);\n\t\t\tthis.draw();\n\t\t\treturn this.visible(false);\n\t\t};\n\n\t\treturn lifeTriangle;\n\n\t}"],"file":"about/my_class/life_triangle.js","sourceRoot":"/source/"}