{"version":3,"names":[],"mappings":"","sources":["about/my_class/checker_main.js"],"sourcesContent":["export default function() {\n\t\tfunction checkerMain() {\n\t\t\tthis._update = bind(this._update, this);\n\t\t\tthis._resize = bind(this._resize, this);\n\t\t\tthis._eCompleteCmnObjData = bind(this._eCompleteCmnObjData, this);\n\t\t\tthis._getDae = bind(this._getDae, this);\n\t\t\tthis.start = bind(this.start, this);\n\t\t\tthis._scene;\n\t\t\tthis._camera;\n\t\t\tthis._dLight;\n\t\t\tthis._ambLight;\n\t\t\tthis._renderer;\n\t\t\tthis._hCamera;\n\t\t\tthis._hLight;\n\t\t\tthis._hAxis;\n\t\t\tthis._trackBall;\n\t\t\tthis._container;\n\t\t\tthis._obj;\n\t\t\tthis._water;\n\t\t\tthis._mesh;\n\t\t\tthis._cnt = 0;\n\t\t\tthis._geo;\n\t\t\tthis._nowZ = 0;\n\t\t\tthis._roadGeomeryNowPos = new THREE.Vector3();\n\t\t\tthis._cmnObjMgr;\n\t\t\tthis._stg;\n\t\t\tthis._kujira = [];\n\t\t\tthis._u = root.MY.myfw.util;\n\t\t\tthis._clock;\n\t\t\tthis._fusha;\n\t\t\tthis._animation = [];\n\t\t\tthis._conf = root.MY.app.conf;\n\t\t}\n\n\t\tcheckerMain.prototype.start = function() {\n\t\t\tthis._clock = new THREE.Clock();\n\t\t\tthis._scene = new THREE.Scene();\n\t\t\tthis._camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 50000);\n\t\t\tthis._camera.position.set(34.1593114077221, 14.246622233488102, 142.6781095688237);\n\t\t\tthis._ambLight = new THREE.AmbientLight(0xffffff);\n\t\t\tthis._scene.add(this._ambLight);\n\t\t\tthis._ambLight.position.set(0, 0, 0);\n\t\t\tthis._renderer = new THREE.WebGLRenderer({\n\t\t\t\tantialias: false\n\t\t\t});\n\t\t\tthis._renderer.setClearColor(0x666666);\n\t\t\tthis._renderer.setSize(window.innerWidth, window.innerHeight);\n\t\t\tdocument.body.appendChild(this._renderer.domElement);\n\t\t\tthis._trackBall = new THREE.TrackballControls(this._camera);\n\t\t\tthis._trackBall.staticMoving = true;\n\t\t\tthis._trackBall.target = new THREE.Vector3(0, 0, 0);\n\t\t\tthis._cmnObjMgr = new root.MY_CLASS.multiObjLoader();\n\t\t\tthis._cmnObjMgr.onComplete = this._eCompleteCmnObjData;\n\t\t\tthis._cmnObjMgr.load([\n\t\t\t\t{\n\t\t\t\t\tkey: \"stg\",\n\t\t\t\t\tfile: \"./assets/obj/stage/stage07_01.obj\",\n\t\t\t\t\ttex: THREE.ImageUtils.loadTexture(\"./assets/img/tex/stage/stage07.jpg\"),\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"parts0\",\n\t\t\t\t\tfile: \"./assets/obj/parts/stage07_tobira_L.obj\",\n\t\t\t\t\ttex: THREE.ImageUtils.loadTexture(\"./assets/img/tex/stage/stage07.jpg\"),\n\t\t\t\t\trePos: true\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"parts1\",\n\t\t\t\t\tfile: \"./assets/obj/parts/stage07_tobira_R.obj\",\n\t\t\t\t\ttex: THREE.ImageUtils.loadTexture(\"./assets/img/tex/stage/stage07.jpg\"),\n\t\t\t\t\trePos: true\n\t\t\t\t}\n\t\t\t]);\n\t\t\troot.MY.myfw.addResize(this._resize);\n\t\t\treturn root.MY.myfw.addUpdate(this._update);\n\t\t};\n\n\t\tcheckerMain.prototype._getDae = function() {\n\t\t\treturn location.hash.replace(\"#\", \"\") + \".dae\";\n\t\t};\n\n\t\tcheckerMain.prototype._eCompleteCmnObjData = function() {\n\t\t\tvar door, i, kujira, kujiras, left, leftCon, leftW, num, pos, right, rightCon, rightW;\n\t\t\tthis._container = new THREE.Object3D();\n\t\t\tthis._scene.add(this._container);\n\t\t\tthis._hAxis = new THREE.AxisHelper(5);\n\t\t\tthis._container.add(this._hAxis);\n\t\t\tthis._stg = this._cmnObjMgr.get(\"stg\").obj.clone();\n\t\t\tthis._container.add(this._stg);\n\t\t\tthis._stg.position.y = this._conf.GROUND_OFFSET.Y;\n\t\t\tthis._stg.position.z = -(this._stg.children[0].geometry.boundingBox.max.z - this._stg.children[0].geometry.boundingBox.min.z) * 0.5;\n\t\t\tdoor = new THREE.Object3D();\n\t\t\tthis._container.add(door);\n\t\t\tdoor.position.copy(this._stg.position);\n\t\t\tdoor.position.z -= 980;\n\t\t\tleftCon = new THREE.Object3D();\n\t\t\tdoor.add(leftCon);\n\t\t\tleftCon.add(new THREE.AxisHelper(5));\n\t\t\tleft = this._cmnObjMgr.get(\"parts0\").obj.clone();\n\t\t\tleftW = left.children[0].geometry.boundingBox.max.x - left.children[0].geometry.boundingBox.min.x;\n\t\t\tleftCon.add(left);\n\t\t\tleft.position.x = leftW;\n\t\t\tleftCon.position.x = -leftW;\n\t\t\tleftCon.rotation.y = this._u.radian(-90);\n\t\t\trightCon = new THREE.Object3D();\n\t\t\tdoor.add(rightCon);\n\t\t\trightCon.add(new THREE.AxisHelper(5));\n\t\t\tright = this._cmnObjMgr.get(\"parts1\").obj.clone();\n\t\t\trightW = right.children[0].geometry.boundingBox.max.x - right.children[0].geometry.boundingBox.min.x;\n\t\t\trightCon.add(right);\n\t\t\tright.position.x = -rightW;\n\t\t\trightCon.position.x = rightW;\n\t\t\trightCon.rotation.y = this._u.radian(90);\n\t\t\tthis._container.position.z = 2300;\n\t\t\tthis._container.position.y = -100;\n\t\t\treturn;\n\t\t\tkujiras = this._cmnObjMgr.get(\"parts0\").obj.clone();\n\t\t\tthis._container.add(kujiras);\n\t\t\tkujiras.position.copy(this._stg.position);\n\t\t\ti = 0;\n\t\t\tnum = 5;\n\t\t\tpos = [[0, 0, -120, 1], [300, -110, 200, 0.6], [-300, -200, -400, 0.5], [-150, -200, 400, 0.35], [0, -300, 100, 0.4]];\n\t\t\twhile (i < num) {\n\t\t\t\tkujira = this._cmnObjMgr.get(\"parts1\").obj.clone();\n\t\t\t\tthis._container.add(kujira);\n\t\t\t\tkujira.position.copy(this._stg.position);\n\t\t\t\tkujira.children[0].material.wireframe = true;\n\t\t\t\tkujira.position.x += pos[i][0];\n\t\t\t\tkujira.position.y += pos[i][1];\n\t\t\t\tkujira.position.z += pos[i][2];\n\t\t\t\tkujira.scale.set(pos[i][3], pos[i][3], pos[i][3]);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\treturn this._container.scale.set(5, 5, 5);\n\t\t};\n\n\t\tcheckerMain.prototype._resize = function() {\n\t\t\tvar h, w;\n\t\t\tw = root.MY.myfw.stageWidth();\n\t\t\th = root.MY.myfw.stageHeight();\n\t\t\tthis._camera.aspect = w / h;\n\t\t\tthis._camera.updateProjectionMatrix();\n\t\t\treturn this._renderer.setSize(w, h);\n\t\t};\n\n\t\tcheckerMain.prototype._update = function() {\n\t\t\tthis._trackBall.update();\n\t\t\tTHREE.AnimationHandler.update(this._clock.getDelta());\n\t\t\tif (this._fusha != null) {\n\t\t\t\tthis._fusha.rotation.z += 0.01;\n\t\t\t}\n\t\t\treturn this._renderer.render(this._scene, this._camera);\n\t\t};\n\n\t\treturn checkerMain;\n\n\t}"],"file":"about/my_class/checker_main.js","sourceRoot":"/source/"}